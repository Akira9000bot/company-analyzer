# 2026-02-22

## Bug Fix: company-analyzer fetch_data.sh CIK Padding

**Issue:** `fetch_data.sh NOW` failed with "Invalid JSON received from SEC"

**Root Cause:** CIK padding logic corrupted already-padded CIKs
- `printf "%010d" "0001373715"` interpreted the string as number `1373715`
- Result: padded to `0000391117` (wrong CIK entirely)
- SEC API returned empty/invalid for wrong CIK

**Fix Applied:** `skills/company-analyzer/scripts/fetch_data.sh` line 58
```bash
# Before:
CIK_PADDED=$(printf "%010d" "$CIK" 2>/dev/null || echo "$CIK")

# After:
if [ ${#CIK} -eq 10 ]; then
    CIK_PADDED="$CIK"
else
    CIK_PADDED=$(printf "%010d" "$CIK" 2>/dev/null || echo "$CIK")
fi
```

**Tested:** NOW (ServiceNow) data fetch now works correctly
- Revenue: $631M, Net Income: $1.75B, Assets: $26B

**Impact:** All tickers with 10-digit CIKs now work (was broken for any that came back padded from SEC lookup)
